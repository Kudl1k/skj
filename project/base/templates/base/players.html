{% extends 'main.html' %}
{% block title %}
Players Page
{% endblock %}
{% block content %}
<div class="container-sm">
    <h1>{{title}}</h1>
    <div class="container text-start">
        <div class="row align-items-start">
            <div class="col">
                <ul class="list-group">
                    {% for league in leagues %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {% if league.id_category.name == "Football" %}
                            <a href="{% url 'football_league_players' league.id %}">{{ league.name }}</a>
                        {% elif league.id_category.name == "Basketball" %}
                            <a href="{% url 'basketball_league' league.id %}">{{ league.name }}</a>
                        {% elif league.id_category.name == "Ice Hockey" %}
                            <a href="{% url 'hockey_league' league.id %}">{{ league.name }}</a>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col">
                <ul class="list-group">
                    {% for team in teams %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <a href="{% url 'football_team_players' team.id_league.id team.id %}">
                            {{ team.name }}
                        </a>
                    </li>
                    {% empty %}
                    <li class="list-group-item">Please select a league to view teams.</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col">
                <ul class="list-group">
                    {% for player in players %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <a href="{% url 'football_player_players' player.history.id_team.id_league.id player.history.id_team.id player.player.id %}">
                            {{ player.player.name }} {{ player.player.surname }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col">
                {% if player_info %}
                    <ul class="list-group">
                        <li class="list-group-item">
                            <h2>{{ player_info.player.name }} {{ player_info.player.surname }}</h2>
                            {% for history in player_info.history %}
                                <strong>Team:</strong> {{ history.id_team.name }}<br>
                                <strong>Since:</strong> {{ history.start_date }}<br>
                                {% if history.end_date %}
                                <strong>Until:</strong> {{ history.end_date }}<br>
                                {% endif %}
                            {% endfor %}

                        </li>
                    </ul>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}